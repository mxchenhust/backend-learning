#  php入门

tags: php

[TOC]

----------
##**php标记**##

 - 如果文件内容是纯 PHP 代码，最好在文件末尾删除 PHP 结束标记。这可以避免在 PHP 结束标记之后万一意外加入了空格或者换行符，会导致 PHP 开始输出这些空白。

---
##**php类型判断**##
- var_dump()显示变量的值和类型
- get_type()返回变量的类型
- is_加类型，判断变量是否为某一类型，如is_int()

---
##**php数据类型**##

1. boolean判断False的情况
   - 布尔值 FALSE 本身
   - 整型值 0（零）
   - 浮点型值 0.0（零）
   - 空字符串，以及字符串 "0"
   - 不包括任何元素的数组
   - 特殊类型 NULL（包括尚未赋值的变量）
   - 从空标记生成的 SimpleXML 对象
   
2. 整型
   - interger类型变量在溢出时会判断为float  
   - 八进制0前缀，十六进制0x前缀，二进制0b前缀
   
3. string
   - 双引号内的变量和特殊字符会被解析，单引号不会

4. 数组
   - 数组可通过array()和[  ]创建
   - 若数组使用了不存在的key值，会返回NULL
   
5. object对象
   - 如果将一个非对象值转换为object，将会创建一个内置类 stdClass 的实例。
   - 数组转换时会将key转换为属性名，将value转换为属性值
   
6. NULL
   - 将变量unset()会将其变为NULL

7. 类型转换
   - 隐式类型转换为float>int>string
   - 可用(type)进行强制类型转换

8. 变量比较
   - null 或 String 和 string 比较时，将 null 转换为 ""，进行数字或词汇比较
   - bool 或 null 和其他类型比较时，转换为 bool，FALSE < TRUE
   - string，resource 或 number 相互比较时，将字符串或资源转换为数字，按普通数字比较
   - array 之间比较时，具有较少成员的数组较小
   - object 和其他类型比较时，object 总是更大
   - array 和其他类型比较时，array 总是更大，但是比对象小
   
------

##**php变量和常量**##

 - php变量可通过全局变量传入函数，可通过传递引用使得在函数中操作变量的值
 - php变量可通过静态变量使一个变量在函数内一直存在
 - 可在变量前加@来抑制错误信息
 - php变量可用\`\`来执行外部命令
 - php常量前面没有\$号，只能通过define()和const定义
 - php常量一经定义就不能重新定义

------

##**php特殊操作符**##

 1. 太空舱操作符<=>,用于比较两个表达式，根据左右两边分别返回-1、0或1。
 2.  NULL合并运算符使用 ?? 表示，意味着如果 ?? 之前的变量存在且值不为NULL，它就会返回自身的值，否则返回 ?? 后的操作数。

--------- 
##**php函数**##
 - 函数可通过值传递、引用传递和默认参数传递来传递函数参数
 - 函数不能返回多个值，但可通过返回一个数组来达到返回多个值的效果
 - 可以用可变函数的语法来使用对象方法和静态方法
 - 静态方法调用优先级高于属性调用
 - 内置函数在编译时需要和特定的扩展模块一起编译
 - 匿名函数可以使用use从父作用域继承变量，但是在定义的时候继承，而不是调用的时候继承
 - 匿名函数也可通过引用传递从父作用域继承变量
 - 函数除了返回值以外也可以返回引用
 
------
##**php对象**##
  - 对象在继承时使用final修饰的方法不能被覆盖
  - 对象在继承时可以使用parent::调用被覆盖的父类方法
  - public所定义的类成员可以在任何地方被访问,protected所定义的类成员则可以被其所在类的子类和父类访问（当然，该成员所在的类也可以访问）,private定义的类成员则只能被其所在类访问，不能被继承
  - 对象在继承时访问控制符的限定性只能变得更弱，不能更强
  - 在类的成员方法里可以用\$this->加变量名来访问类的属性和方法，但静态方法或属性只能通过self::加变量名访问，变量名要加\$符号，而\$this->不需要
  - 接口中可以定义常量
  - 在php5中可以使用spl_autoload_register()函数来注册任意数量的自动加载器
  - php对象在实例化时会调用\__construct()，在所以引用被删除或引用被显式销毁时会调用\__destruct()
  - 静态类中的方法或成员可以不实例化就调用，但静态成员不能通过对象直接访问
  - 继承一个抽象类的时候，父类的方法必须在子类中被全部定义，方法的调用方式必须匹配，即参数的类型和数目应一致
  - 接口指定了一个类要实现的方法，所有方法都是public，实现接口使用implements操作符，接口也可以继承

##**php文件操作**##
  1. 打开文件：fopen()， a:追加，x:谨慎写
  2. 写文件fwrite(\$fp, \$str, \$length) or fputs()
  3. 读文件 
     - 读取一行文件：fgets(),fgetss(),fgetcsv()（可将文件分为多行）
     - 读取整个文件，readfile()（将整个文件输出到标准输出）；file()（将整个文件读取发送到数组）;file_get_contents()（以字符串的形式返回整个文件）
     - 读取一个字符fgetc()
     - 判断何时读完feof()，判断文件存在file_exists()，删除文件unlink()，复位文件指针rewind()
  4. 文件锁定flock()，读：LOCK_SH，写：LOCK_EX，释放：LOCK_UN，防止加锁时阻塞：LOCK_NB
  5. 关闭文件fclose()
  6. 删除文件unlink()
  
##**php xml文件解析**##
 - simplexml_load_file()，可将xml文档转换为SimpleXML Element对象
 - xpath("//element")，可以寻找xml文件中所有对应元素
 - simplexml允许对元素的值进行修改
 - simplexml可以很容易的添加子节点和属性
 - xml文件可通过 $xml=simplexml_load_file(); $str = json_decode($xml); $arr = json_decode($str); 转换为数组
 
##**php json解析**##
 - json数据的名称/值对不能使用单引号，如需引号只能使用双引号
 - json_last_error()可以返回json的错误类型
 - json_decode()把一个json变量转换为php变量
 - \$contents = file_get_contents(\$url); \$contents = utf8_encode(\$contents); \$results = json_decode(\$contents);  确保转换的文件为utf-8编码
 - json_encode()把php变量转换为json变量
 
##**php stdClass**##
 - stdClass类是一个没有成员变量也没有成员方法的内部保留类。它的所有的魔术方法，父类、接口等在初始化时都被设置成NULL。
 - stdClass在使用时可以自动添加成员变量，无须在定义时说明
 
---------------------------
##**php flock**##
 - php flock锁是基于内核的打开文件句柄的
 - flock对于使用同一个文件描述符的文件句柄的多次加锁会更新锁，不会陷入阻塞（先打开一个文件，再创建多进程加锁时）
 - flock对于使用不同文件描述符的文件句柄的多次加锁会陷入阻塞，直到前一个释放锁
  